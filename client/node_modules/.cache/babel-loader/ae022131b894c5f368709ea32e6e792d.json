{"ast":null,"code":"var _jsxFileName = \"/Users/alexanderkim/Documents/Repositories/field-agent-security/client/src/App.js\",\n    _s = $RefreshSig$();\n\nimport NavBar from \"./components/NavBar\";\nimport FieldAgents from \"./components/FieldAgents\";\nimport Add from \"./components/AddFieldAgent\";\nimport Update from \"./components/UpdateFieldAgent\";\nimport Delete from \"./components/DeleteFieldAgent\";\nimport NotFound from \"./components/NotFound\";\nimport Login from \"./components/Login\";\nimport AuthContext from \"./AuthContext\";\nimport { Route, Switch } from \"react-router-dom\";\nimport { useEffect, useState } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport jwtDecode from \"jwt-decode\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst TOKEN = 'jwt_token';\n\nfunction App() {\n  _s();\n\n  const [init, setInit] = useState(false);\n  const [authManager, setAuthManager] = useState({\n    user: null,\n    roles: null,\n\n    login(token) {\n      if (!this.user) {\n        const userData = jwtDecode(token);\n        localStorage.setItem(TOKEN, token);\n        setAuthManager(prevState => ({ ...prevState,\n          user: userData.sub,\n          roles: userData.authorities\n        }));\n      }\n    },\n\n    logout() {\n      if (this.user) {\n        localStorage.removeItem(TOKEN);\n        setAuthManager(prevState => ({ ...prevState,\n          user: null,\n          roles: null\n        }));\n      }\n    },\n\n    hasRole(role) {\n      return this.roles && this.roles.split(',').includes(`ROLE_${role.toUpperCase()}`);\n    }\n\n  });\n  useEffect(() => {\n    const token = localStorage.getItem(TOKEN);\n\n    if (token) {\n      authManager.login(token);\n    }\n\n    setInit(true);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: init ? /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n      value: authManager,\n      children: [/*#__PURE__*/_jsxDEV(NavBar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(Switch, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            exact: true,\n            path: \"/\",\n            children: /*#__PURE__*/_jsxDEV(Home, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 56,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            exact: true,\n            path: \"/about\",\n            children: /*#__PURE__*/_jsxDEV(About, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            exact: true,\n            path: \"/agent\",\n            children: /*#__PURE__*/_jsxDEV(FieldAgents, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            exact: true,\n            path: \"/agent/add\",\n            children: authManager.user ? /*#__PURE__*/_jsxDEV(Add, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 35\n            }, this) : /*#__PURE__*/_jsxDEV(Redirect, {\n              to: \"/login\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 45\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            exact: true,\n            path: \"/agent/edit/:id\",\n            children: authManager.user ? /*#__PURE__*/_jsxDEV(Update, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 35\n            }, this) : /*#__PURE__*/_jsxDEV(Redirect, {\n              to: \"/login\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 49\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            exact: true,\n            path: \"/agent/delete/:id\",\n            children: authManager.hasRole('admin') ? /*#__PURE__*/_jsxDEV(Delete, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 48\n            }, this) : /*#__PURE__*/_jsxDEV(Redirect, {\n              to: \"/login\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 62\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            exact: true,\n            path: \"/login\",\n            children: authManager.user ? /*#__PURE__*/_jsxDEV(Redirect, {\n              to: \"/\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 35\n            }, this) : /*#__PURE__*/_jsxDEV(Login, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 57\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            children: /*#__PURE__*/_jsxDEV(NotFound, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 8\n    }, this) : null\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"5ADx1PzM2Jd2izDITYusMA7/2gA=\");\n\n_c = App;\n\nfunction Home() {\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Home\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Welcome to the Field Agents app, agent.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_c2 = Home;\n\nfunction About() {\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"About\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"About the Creator\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"A young man trying to hone his skills in programming and become the master coder.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_c3 = About;\nexport default App;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"App\");\n$RefreshReg$(_c2, \"Home\");\n$RefreshReg$(_c3, \"About\");","map":{"version":3,"sources":["/Users/alexanderkim/Documents/Repositories/field-agent-security/client/src/App.js"],"names":["NavBar","FieldAgents","Add","Update","Delete","NotFound","Login","AuthContext","Route","Switch","useEffect","useState","Redirect","jwtDecode","TOKEN","App","init","setInit","authManager","setAuthManager","user","roles","login","token","userData","localStorage","setItem","prevState","sub","authorities","logout","removeItem","hasRole","role","split","includes","toUpperCase","getItem","Home","About"],"mappings":"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","sourcesContent":["import NavBar from \"./components/NavBar\";\nimport FieldAgents from \"./components/FieldAgents\";\nimport Add from \"./components/AddFieldAgent\";\nimport Update from \"./components/UpdateFieldAgent\";\nimport Delete from \"./components/DeleteFieldAgent\";\nimport NotFound from \"./components/NotFound\";\nimport Login from \"./components/Login\";\nimport AuthContext from \"./AuthContext\";\n\nimport { Route, Switch } from \"react-router-dom\";\nimport { useEffect, useState } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport jwtDecode from \"jwt-decode\";\n\nconst TOKEN = 'jwt_token';\n\nfunction App() {\n  const [init, setInit] = useState(false);\n  const [authManager, setAuthManager] = useState({\n    user: null,\n    roles: null,\n    login(token) {\n      if (!this.user) {\n        const userData = jwtDecode(token);\n        localStorage.setItem(TOKEN, token);\n        setAuthManager((prevState) => ({...prevState, user: userData.sub, roles: userData.authorities}));\n      }\n    },\n    logout() {\n      if (this.user) {\n        localStorage.removeItem(TOKEN);\n        setAuthManager((prevState) => ({...prevState, user: null, roles: null}));\n      }\n    },\n    hasRole(role) {\n      return this.roles && this.roles.split(',').includes(`ROLE_${role.toUpperCase()}`);\n    }\n  });\n\n  useEffect(() => {\n    const token = localStorage.getItem(TOKEN);\n    if (token) {\n      authManager.login(token);\n    }\n    setInit(true);\n  }, []);\n\n  return (\n    <div className=\"App\">\n      {init ? \n      (<AuthContext.Provider value={authManager} >\n        <NavBar />\n        <div className=\"container\">\n          <Switch>\n            <Route exact path=\"/\">\n              <Home />\n            </Route>\n            <Route exact path=\"/about\">\n              <About />\n            </Route>\n\n            <Route exact path=\"/agent\" >\n              <FieldAgents />\n            </Route>\n            <Route exact path=\"/agent/add\" >\n              {authManager.user ? <Add /> : <Redirect to=\"/login\" /> }\n            </Route>\n            <Route exact path=\"/agent/edit/:id\" >\n              {authManager.user ? <Update />  : <Redirect to=\"/login\" /> }\n            </Route>\n            <Route exact path=\"/agent/delete/:id\" >\n              {authManager.hasRole('admin')  ? <Delete />  : <Redirect to=\"/login\" /> }\n            </Route>\n            <Route exact path=\"/login\" >\n              {authManager.user ? <Redirect to=\"/\" /> : <Login />}\n            </Route>\n            <Route>\n              <NotFound />\n            </Route>\n          </Switch>   \n        </div>\n      </AuthContext.Provider>) : null}\n    </div>\n  );\n}\n\nfunction Home() {\n  return (\n    <>\n      <h2>Home</h2>\n      <div>\n        <p>Welcome to the Field Agents app, agent.</p>\n      </div>\n    </>\n  )\n}\n\nfunction About() {\n  return (\n    <>\n      <h2>About</h2>\n      <div>\n        <p>About the Creator</p>\n        <ul>\n          <li>A young man trying to hone his skills in programming and become the master coder.</li>\n        </ul>\n      </div>\n    </>\n  )\n}\n\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}